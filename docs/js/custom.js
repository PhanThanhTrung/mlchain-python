const div = document.querySelector(".github-topic-projects"); async function getDataBatch(t) { const e = await fetch(`https://api.github.com/search/repositories?q=topic:fastapi&per_page=100&page=${t}`, { headers: { Accept: "application/vnd.github.mercy-preview+json" } }); return await e.json() } async function getData() { let t = 1, e = [], a = await getDataBatch(t); e = e.concat(a.items); const n = a.total_count; for (; e.length < n;)t += 1, a = await getDataBatch(t), e = e.concat(a.items); return e } function setupTermynal() { document.querySelectorAll(".use-termynal").forEach(t => { t.style.display = "block", new Termynal(t, { lineDelay: 500 }) }); const t = "---\x3e 100%", e = "$ ", a = "# ", n = "termy"; let l = []; function i() { l = l.filter(t => !(t.container.getBoundingClientRect().top - innerHeight <= 0) || (t.init(), !1)) } window.addEventListener("scroll", i), document.querySelectorAll(`.${n} .highlight`).forEach(n => { const i = n.textContent.split("\n"), o = []; let c = []; function r() { if (c.length) { let t = !0; c.forEach(e => { e && (t = !1) }), dataValue = {}, t && (dataValue.delay = 0), "" === c[c.length - 1] && c.push(""); const e = c.join("<br>"); dataValue.value = e, o.push(dataValue), c = [] } } for (let n of i) if (n === t) r(), o.push({ type: "progress" }); else if (n.startsWith(e)) { r(); const t = n.replace(e, "").trimEnd(); o.push({ type: "input", value: t }) } else if (n.startsWith("// ")) { r(); const t = "ðŸ’¬ " + n.replace("// ", "").trimEnd(); o.push({ value: t, class: "termynal-comment", delay: 0 }) } else if (n.startsWith(a)) { r(); const t = n.indexOf(e); -1 === t && console.error("Custom prompt found but no end delimiter", n); const l = n.slice(0, t).replace(a, ""); let i = n.slice(t + e.length); o.push({ type: "input", value: i, prompt: l }) } else c.push(n); r(); const s = document.createElement("div"); n.replaceWith(s); const u = new Termynal(s, { lineData: o, noInit: !0, lineDelay: 500 }); l.push(u) }), i() } async function main() { if (div) { data = await getData(), div.innerHTML = "<ul></ul>"; const t = document.querySelector(".github-topic-projects ul"); data.forEach(e => { if ("tiangolo/fastapi" === e.full_name) return; const a = document.createElement("li"); a.innerHTML = `<a href="${e.html_url}" target="_blank">â˜… ${e.stargazers_count} - ${e.full_name}</a> by <a href="${e.owner.html_url}" target="_blank">@${e.owner.login}</a>`, t.append(a) }) } setupTermynal() } main();